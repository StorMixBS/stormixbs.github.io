<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Horizons | Future Tech News</title>
    
    <meta name="description" content="Deep Horizons - All new technology news for free. Deep dive into the future.">
    <meta name="robots" content="index, follow">
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script>

    <style>
        :root {
            --primary-black: #000000;
            --bg-gray: #fcfcfc;
            --accent-gray: #e0e0e0;
            --text-main: #1a1a1a;
        }

        body { 
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; 
            margin: 0; background-color: var(--bg-gray); color: var(--text-main);
        }

        /* Header */
        header { background-color: var(--primary-black); color: white; padding: 70px 20px; text-align: center; }
        header h1 { margin: 0; font-size: 3.5rem; text-transform: uppercase; letter-spacing: 7px; font-weight: 900; }
        header p { margin: 10px 0 0; font-size: 1.1rem; font-weight: 300; letter-spacing: 2px; color: #888; }

        .container { max-width: 800px; margin: 0 auto; padding: 20px; }

        /* Espaço para Propaganda (Ads) */
        .ad-space {
            margin: 20px auto;
            background: #eee;
            border: 1px dashed #bbb;
            text-align: center;
            padding: 15px;
            font-size: 0.7rem;
            color: #999;
            text-transform: uppercase;
            max-width: 728px;
            min-height: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Login Integrado */
        #login-section {
            background: white; padding: 50px; border: 1px solid #000;
            text-align: center; margin: 40px auto; box-shadow: 15px 15px 0px #000;
        }
        #user-name-input { 
            width: 100%; padding: 15px; border: 1px solid #ddd; 
            font-size: 1rem; margin-bottom: 20px; outline: none;
        }

        /* Painel Admin */
        #admin-panel { 
            display: none; background: white; padding: 40px; border: 1px solid #000;
            margin-bottom: 50px; box-shadow: 15px 15px 0px #000;
        }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; font-weight: bold; margin-bottom: 10px; font-size: 0.8rem; letter-spacing: 1px;}
        input, textarea { width: 100%; padding: 15px; border: 1px solid #eee; background: #fafafa; font-size: 1rem; box-sizing: border-box; }
        
        button { 
            background: black; color: white; border: none; padding: 20px; 
            cursor: pointer; font-weight: bold; width: 100%; text-transform: uppercase; 
            letter-spacing: 2px; transition: background 0.3s;
        }
        button:hover { background: #333; }

        /* Blog Card */
        .blog-card { background: white; margin-bottom: 80px; position: relative; }
        .blog-content h3 { margin: 0; font-size: 2.8rem; line-height: 1; letter-spacing: -1px; }
        .post-date { display: block; margin: 15px 0 30px 0; color: #999; font-size: 0.85rem; font-weight: bold; }
        .blog-content p { font-size: 1.25rem; line-height: 1.7; color: #333; }
        .post-image-footer { margin-top: 30px; border-top: 1px solid #f0f0f0; padding-top: 30px; }
        .post-image-footer img { max-width: 100%; height: auto; display: block; margin: 0 auto; }

        #load-more { 
            display: none; text-align: center; padding: 20px; border: 2px solid black;
            font-weight: bold; cursor: pointer; text-transform: uppercase; margin-top: 50px;
        }
    </style>
</head>
<body>

    <header>
        <h1>Deep Horizons</h1>
        <p>All new technology news for free</p>
    </header>

    <div class="ad-space">
        Advertisement Space - Top Banner
    </div>

    <div class="container">
        <section id="login-section">
            <h2 style="letter-spacing: 2px; text-transform: uppercase;">Portal Identity</h2>
            <input type="text" id="user-name-input" maxlength="100" placeholder="Identity name">
            <button onclick="handleLogin()">Authorize Access</button>
        </section>

        <div id="admin-panel">
            <h2 style="margin-top:0">System Update</h2>
            <div class="form-group">
                <label>Headline</label>
                <input type="text" id="post-title" placeholder="Main title">
            </div>
            <div class="form-group">
                <label>Media Asset (URL)</label>
                <input type="text" id="post-image" placeholder="Image link">
            </div>
            <div class="form-group">
                <label>Article Core</label>
                <textarea id="post-body" rows="12" placeholder="Write content..."></textarea>
            </div>
            <button onclick="createPost()">Commit Post</button>
        </div>

        <div id="main-content" style="display: none;">
            <div id="blog-feed"></div>
            
            <div class="ad-space">
                Advertisement Space - In-Feed Ad
            </div>

            <div id="load-more">Explore More Archives</div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, query, orderBy, limit, getDocs, startAfter } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // CONFIGURAÇÃO FIREBASE
        const firebaseConfig = {
            apiKey: "AIzaSyALHh2CFuSSWI2MR6RyiqRZZf4ABnp9Zyo",
            authDomain: "deep-horizons-51171.firebaseapp.com",
            projectId: "deep-horizons-51171",
            storageBucket: "deep-horizons-51171.firebasestorage.app",
            messagingSenderId: "670734932259",
            appId: "G-TPLB1K4SEY"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        let lastVisiblePost = null;
        let activeUser = "";

        window.handleLogin = () => {
            const input = document.getElementById('user-name-input').value.trim();
            if (!input) return;

            activeUser = input;
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';

            if (activeUser === "ASDERTYUGDNJ") {
                document.getElementById('admin-panel').style.display = 'block';
            }
            loadPosts();
        };

        window.createPost = async () => {
            const title = document.getElementById('post-title').value;
            const img = document.getElementById('post-image').value;
            const body = document.getElementById('post-body').value;

            if (!title || !body) return alert("Fields missing.");

            try {
                await addDoc(collection(db, "posts"), {
                    title, image: img, content: body, date: new Date(), admin_code: activeUser
                });
                location.reload();
            } catch (e) { alert("Error."); }
        };

        async function loadPosts(isNextPage = false) {
            let q = query(collection(db, "posts"), orderBy("date", "desc"), limit(5));
            if (isNextPage && lastVisiblePost) {
                q = query(collection(db, "posts"), orderBy("date", "desc"), startAfter(lastVisiblePost), limit(5));
            }

            const snap = await getDocs(q);
            if (snap.empty) {
                document.getElementById('load-more').style.display = 'none';
                return;
            }

            lastVisiblePost = snap.docs[snap.docs.length - 1];
            const feed = document.getElementById('blog-feed');

            snap.forEach(doc => {
                const p = doc.data();
                const d = p.date.toDate().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
                const media = p.image ? `<div class="post-image-footer"><img src="${p.image}"></div>` : '';
                
                feed.innerHTML += `
                    <article class="blog-card">
                        <div class="blog-content">
                            <h3>${p.title}</h3>
                            <span class="post-date">${d}</span>
                            <p>${p.content}</p>
                            ${media}
                        </div>
                    </article>`;
            });
            document.getElementById('load-more').style.display = 'block';
        }

        document.getElementById('load-more').addEventListener('click', () => loadPosts(true));
    </script>
</body>
</html>
